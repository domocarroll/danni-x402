---
title: ERC-8004
created: 2026-02-12
type: integration
tags: [erc-8004, identity, reputation, ethereum, trust]
---

# ERC-8004: Trustless Agents

The trust infrastructure for the agentic economy. Enables agents to be discovered, selected, and trusted across organizational boundaries without pre-existing relationships.

**This is a hackathon tag.** Higher priority than initially assessed.

## The Problem

- [[MCP Integration|MCP]] tells agents what tools are available
- [[A2A Protocol|A2A]] tells agents how to talk to each other
- [[x402 Protocol|x402]] tells agents how to pay each other
- **None answer: "Should I trust this agent with my $100?"**

ERC-8004 fills that gap.

## Three Registries

### 1. Identity Registry (ERC-721 Based)
- Agent gets an on-chain NFT as identity
- Global agent ID: `{namespace}:{chainId}:{identityRegistry}:{agentId}`
- Registration file describes capabilities, endpoints, pricing
- Has explicit `x402Support: true` flag
- Supports domain verification via `/.well-known/agent-registration.json`

Key functions:
```solidity
register(string agentURI, MetadataEntry[] metadata) → uint256 agentId
setAgentWallet(uint256 agentId, address newWallet, ...)
getAgentWallet(uint256 agentId) → address
```

### 2. Reputation Registry
- Clients submit feedback after interactions
- Scored by customizable tags:

| Tag | What | Example |
|---|---|---|
| `starred` | Quality (0-100) | 87/100 |
| `responseTime` | Milliseconds | 560ms |
| `successRate` | Percentage | 89% |
| `uptime` | Percentage | 99.77% |

Key functions:
```solidity
giveFeedback(uint256 agentId, int128 value, uint8 decimals, ...)
getSummary(uint256 agentId, ...) → (count, summaryValue, decimals)
```

- Sybil mitigation: read functions require explicit client address filtering
- On-chain storage for queryable signals, off-chain for verbose data

### 3. Validation Registry
- Independent validators verify agent work
- Progressive validation (0=failed, 100=passed, intermediate=spectrum)
- Pluggable trust models:
  - **Reputation**: Client feedback aggregation (lightweight)
  - **Crypto-economic**: Stake-secured re-execution (medium assurance)
  - **TEE attestation**: Trusted execution environment (highest assurance)

## Agent Registration File

```json
{
  "type": "agent",
  "name": "Danni Strategic Advisor",
  "description": "Premium AI brand strategist powered by swarm intelligence",
  "image": "https://danni.subfrac.cloud/avatar.png",
  "services": [
    { "type": "web", "url": "https://danni.subfrac.cloud" },
    { "type": "a2a", "url": "https://danni.subfrac.cloud/.well-known/agent.json" },
    { "type": "mcp", "url": "https://danni.subfrac.cloud/mcp" }
  ],
  "x402Support": true,
  "active": true,
  "supportedTrust": ["reputation"],
  "registrations": [
    { "chainId": 84532, "agentId": 1 }
  ]
}
```

## The Trust Flow For Danni

```
Agent queries Identity Registry → finds Danni
     │
     ├── Checks Reputation Registry → 95/100 quality, 560ms response
     │
     ├── Sees x402Support: true
     ├── Sees endpoints: MCP, A2A, web
     │
     └── Decides: "95/100 reputation justifies $100" → pays via x402
```

## For the Hackathon

**Impact: HIGH.** ERC-8004 is a hackathon tag. Implementing it would:
- Complete the trust story (discovery → trust → payment → delivery)
- Show understanding of the full agentic commerce stack
- Differentiate from entries that only do payments

**Effort assessment:**
- Deploying identity registry + registering Danni: ~4 hours
- Basic reputation feedback after consultations: ~3 hours
- Agent registration file at well-known URL: ~1 hour
- **Total: ~8 hours** (fits in an Echo team sprint)

**Available SDKs:**
- [0xgasless/agent-sdk](https://github.com/0xgasless/agent-sdk) - ERC-8004 + x402 (Avalanche only currently)
- [ChaosChain/chaoschain-x402](https://github.com/ChaosChain/chaoschain-x402) - Optional ERC-8004 tokenId

**Note:** Registry contracts may need deploying on Base Sepolia if not already there. Check existing deployments first.

## Related
- [[x402 Protocol]]
- [[A2A Protocol]]
- [[MCP Integration]]
- [[Danni Commerce Agent]]
- [[Hackathon Strategy]]
- [[Sponsor Alignment]]
